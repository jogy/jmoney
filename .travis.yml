sudo: required
language: java
jdk: oraclejdk8
script: "./gradlew buildTravis"

services:
  - docker

before_install:
  - docker login -u="$DOCKER_USERNAME" -p="$DOCKER_PASSWORD"

before_cache:
  - rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
  - rm -fr $HOME/.gradle/caches/*/plugin-resolution/
cache:
  directories:
    - front-end/.gradle/nodejs/
    - front-end/.gradle/npm/
    - front-end/node_modules/
    - $HOME/.gradle/caches/
    - $HOME/.gradle/wrapper/

after_success:
  - bash <(curl -s https://codecov.io/bash)

deploy:
  provider: heroku
  api_key:
    secure: jlLK6Wj/rjxvKAWKEMj0Hys6bW2lwPZmoqPQKDrq1Bey6SEZfh2Gfnnakn9ZuMsc2wnV7a5kWhQVCHq8fpgGAYWEHY7mQz560llUyxS6ce/reC0da4zxQhLfonhsF4tdP78SiOb0pIbClHyvTXvnggU2ihG1SzI7nXumltLx0Vy2oWAg7pG1Hr2tJQUFMOUBhrISEgI6Yzj8T8LT0ySOQmVn86oKbSrLmjWIb2vwGJ7VGSkpRZs3DQQtEDEiAFyxeWa9DDm1FB8Spo2fEN/A0YFYUMY789cXhL9g167eDSiBQgW0IbUzlCyWMMQdRw+wDEih0FlmgzOO1ebB5wutUVSJozILpP8r+NY7WTgGsG0+G5PKsRxhbMAbCK0lS8ZcHLnBSket8qbThFvt4Rz+PJcUEGyTKN3o28TEdJKVnQlvpnRbXP2fIXjUlJwEzq9NgrJ4hCd9ER6cxWzRBnmQQ/eM2IRoknVgwbM/K8O6CDuRnT9dnGfJi2Kjm4RLPuGLvl2DrTADZlZAVFts0wLbQsf7CwIOJWLgXL8BRY2BJZGbMkn8QDv31qrnL2xyawar/RV45HyZ7FoZyKZaulS2gJU/A4wmcY+VaQt9k3j4ubLLQ07XmVXVCbuTEI1DTBglk2MWTJ2RViXWALTU0gBIjtjuP7LWyQpn/Z2SnGLJLPc=
  app: jmoney-demo
